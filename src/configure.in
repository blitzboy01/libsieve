dnl Process this file with autoconf to produce a configure script.
AC_INIT(addr.c)
AM_INIT_AUTOMAKE

dnl Set up the information about this release
PACKAGE="libsieve"
VERSION="2.1.3"

dnl Checks for programs.
AC_PROG_AWK
AC_PROG_YACC
AM_PROG_LEX
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_LIBTOOL
AC_PROG_MAKE_SET

#AC_PROG_AS
#AC_PROG_ACLOCAL
#AC_PROG_AUTOCONF
#AC_PROG_AUTOMAKE
#AC_PROG_AUTOHEADER
AC_PATH_PROGS(AS, as)
AC_PATH_PROGS(ACLOCAL, aclocal)
AC_PATH_PROGS(AUTOCONF, autoconf)
AC_PATH_PROGS(AUTOMAKE, automake)
AC_PATH_PROGS(AUTOHEADER, autoheader)

AC_ARG_PROGRAM

AC_DEFINE(POSIX)

dnl Checks for libraries.
dnl Replace `main' with a function in -ldb:
AC_CHECK_LIB(db, main)
dnl Replace `main' with a function in -ldl:
AC_CHECK_LIB(dl, main)
dnl Replace `main' with a function in -lfl:
AC_CHECK_LIB(fl, main)
dnl Replace `main' with a function in -lresolv:
AC_CHECK_LIB(resolv, main)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(fcntl.h malloc.h strings.h sys/file.h sys/time.h unistd.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_TYPE_SIZE_T
AC_HEADER_TIME

dnl Checks for library functions.
AC_FUNC_MEMCMP
AC_FUNC_VPRINTF
AC_CHECK_FUNCS(gettimeofday regcomp strcspn strdup strerror strstr)

AM_CONFIG_HEADER(config.h)

LTLIBOBJS="echo \"$LIBOBJS\" | sed -e \"s,\.[^.]* ,.lo ,g;s,\.[^.]*\$,.lo,\" "
AC_SUBST(LTLIBOBJS)

AC_OUTPUT(lib/Makefile Makefile)
